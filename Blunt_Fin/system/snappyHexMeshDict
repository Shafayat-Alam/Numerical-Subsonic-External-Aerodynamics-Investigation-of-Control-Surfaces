
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      snappyHexMeshDict;
}

castellatedMesh true;
snap            true;
addLayers       false;

geometry
{
    Fin.stl  
    {
        type triSurfaceMesh;
        name Fin; 
    }
}

castellatedMeshControls
{
    maxLocalCells 1000000;
    maxGlobalCells 4000000; 
    minRefinementCells 10;
    nCellsBetweenLevels 4; 

    features 
    (
        {
            file "Fin.eMesh"; 
            level 6; 
        }
    );

    refinementSurfaces
    {
        Fin 
        {
            level (6 7); 
            patchInfo { type wall; }
        }
    }

    refinementRegions
    {
        Fin
        {
            mode distance;
            levels ((0.005 7)); 
        }
    }
    
    resolveFeatureAngle 30;
    mergeTolerance 1e-4; 
    allowFreeStandingZoneFaces true;
    locationInMesh (-0.5 0 0.2); 
}

snapControls
{
    nSmoothPatch 5;       
    tolerance 1.0;        
    nSolveIter 100;      
    nRelaxIter 15;        
    
    nFeatureSnapIter 15; 
    implicitFeatureSnap false; 
    explicitFeatureSnap true; 
    multiRegionFeatureSnap true;
}

addLayersControls {}

meshQualityControls
{
    maxNonOrtho         75; 
    maxBoundarySkewness  20;
    maxInternalSkewness  4;
    maxConcave          80;
    minArea         1e-13; 
    minVol        -1e30; 
    minTwist      -1e30;
    minFaceWeight 0.02;
    minVolRatio          0.01;
    minTetQuality       -1e30; 
    errorReduction      0.5;   
    nSmoothScale        10;    
    minTriangleTwist -1e30;
    minDeterminant    0.001;
}

mergeTolerance 1e-4;
debug 0;